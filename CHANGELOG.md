# dbt Fusion Changelog
All notable changes to this project will be documented in this file.

- This file provides a full account of all changes to `dbt-fusion`
- Changes are listed under the (pre)release in which they first appear. Subsequent releases include changes from previous releases.
- "Breaking changes" listed under a version may require action from end users or external maintainers when upgrading to that version.
- Do not edit this file directly. This file is auto-generated using [changie](https://github.com/miniscruff/changie). For details on how to document a change, see [the contributing guide](CONTRIBUTING.md#adding-a-changelog-entry).

## dbt-fusion 2.0.0-beta.32 - June 26, 2025

### Breaking Changes

- Support loaded_at_field and loaded_at_query in sources and tables config, not as properties

### Features

- Implement jinja exception "raise_contract_error"
- (adapter) enable use of type inferred columns in CSVs

### Fixes

- shorten file name length limit to account for .macro_span.json
- Limit -1 means no limit
- fix string bool manifest deserialization
- YAML Schema: fix type of `ModelConfig::tag` field
- Support index on list

### Under the Hood

- Define convenience macro for creating internal error
- fix errors swallowing

## dbt-fusion 2.0.0-beta.31 - June 26, 2025

### Fixes

- normalize special chars in source name
- Allow positional arguments in dictsort
- Fix model with CTE using ephemeral model
- Reverted timezone compatibility change due to 'chrono-tz' crate having an issue referencing 'uncased' crate
- Ignore .jinja files in macro and test paths for conformance with dbt-core
- Fix Selector Exclusion

### Under the Hood

- Serialize configs via resource_types

## dbt-fusion 2.0.0-beta.30 - June 25, 2025

### Fixes

- Make semantic model entity configs optional
- Fix BQ seed with custom schema

## dbt-fusion 2.0.0-beta.29 - June 25, 2025

### Features

- Implement jinja exceptions
- (adapter bigquery) enable seed ingestion
- Add 'static_analysis' property to all analyzeable nodes, ensure sources adapt static_analysis to failures

### Fixes

- Make modules.pytz.timezone compatible with dbt-core by tlm365.
- Fix `DbtContract` defaults for serialization
- Fix error while loading defer manifest
- fix panic in incorporate
- Add store_result and load_result macros to run-operation jinja context
- Fix quoting config not respected in various places - Automatic catalog/schema creation - api.Relation.create Jinja function

## dbt-fusion 2.0.0-beta.28 - June 24, 2025

### Fixes

- Respect quote config in column test generation
- Support string or array of strings for databricks liquid_clustered_by config + add missing merge configs
- fix map_to_workspace_path
- Fix span reporting for source yaml issues
- Fix respecting static_analysis project, properties, and config

## dbt-fusion 2.0.0-beta.27 - June 23, 2025

### Fixes

- correctly resolve selector inheritence
- Fix exlusion logic so exclusion happens after selection and indirect selection

## dbt-fusion 2.0.0-beta.26 - June 23, 2025

### Features

- Support datetime in seed
- Collect refs and sources in pre/post hooks and provide better error message for unrecognized refs at compile time
- Support auto deferral

### Fixes

- fix snowflake_warehouse config not respected
- No longer create empty schema on DataFrame collect error

## dbt-fusion 2.0.0-beta.25 - June 20, 2025

### Features

- Support datetime in seed

### Fixes

- Add missing `warn_unenforced` to `Constraint` and split out `ModelConstraint`
- `profiles.yml` in all log output instead of `profile.yml`
- Refactor nodes to leverage respective configs over 'DbtConfig' superset
- fix the incorrect source filename some render error
- Jinja: refine dangling block end check
- Fix missing 'materialized' property in snapshot config
- Fix Exosure Properties Expected Schema

### Under the Hood

- Error handling: eliminate MinijinjaError implicit conversion

## dbt-fusion 2.0.0-beta.24 - June 18, 2025

### Fixes

- Fix parse_fqn with trailing semicolon for Snowflake
- [BigQuery] Fix type translation for STRING type
- Improve the mat macro lookup logic

### Under the Hood

- Add support for parsing catalogs.yml files
- (dbt-agate) add all 4 arrow timestamp types as Arrow2Jinja converters.
- Include properties of built-in generic tests in jsonschemas
- Fix telemetry timestamps
- Introduce mechanism for error recovery on Yaml deserialization

## dbt-fusion 2.0.0-beta.23 - June 17, 2025

### Features

- Support dbt_project.yml config support for exposures
- Support parsing redshift-specific configs
- Add redact_credentials method for databricks.

### Fixes

- Validate --vars key-value pairs that do not have a space between key and value
- Collect only prescribed set of directories for docs

### Under the Hood

- Fix missing locations in Yaml related errors
- listener generates macro_spans
- Remove unused crate dependencies
- Use FsError in more places

## dbt-fusion 2.0.0-beta.22 - June 12, 2025

### Fixes

- Use absolute paths for error reporting when reading yml files
- Remove unnecessary flatten directive
- this.MaterializedView is missing
- Fixes missing resource_type in materialize stage
- Ensure snapshots have 'materialized' set to snapshot

### Under the Hood

- [Adapters] Added literal formatting layer for dialect aware translations
- fixes

## dbt-fusion 2.0.0-beta.20 - June 11, 2025

### Features

- Implement --send-anonymous-usage-stats
- Introduce context['...'] for macro lookups

### Fixes

- Ensure on-run-start / end have context[...] object

### Under the Hood

- Add driver level REPL

## dbt-fusion 2.0.0-beta.18 - June 10, 2025

### Features

- (databricks-adapter) get_relation_config and get_config_from_model methods start
- [Databricks] Add get_persist_doc_columns

### Fixes

- Updated column cast to have a better error message
- Add missing 'skip_serializing_none' to reduce the manifest size
- Fixes ambiguity in DATE rendering by adding single quotes
- Fix duplicate snapshot ingestion when projects begin with 'dbt_'

### Under the Hood

- Logging: remove the global logger lock
- patch config.model

## dbt-fusion 2.0.0-beta.16 - June 06, 2025

### Fixes

- (fix snowflake-adapter) pass query_tag from dbt_project.yml
- Use build_model_context for ref and source extraction environment
- Use OS services to check TLS certificates
- fix config.model
- resolve project configs relative to resource path
- Fix for go to definitions for jinja functions containing a 'return'
- Fix skipping custom generate_{}_name macro when projects suffixed with '_dbt' & missing resource_type in graph / manifest.json & case sensitive extensions
- Refactor node context initialization to have independent stateful fn init

### Under the Hood

- Bump snowflake driver to patch gosnowflake, arrow-adbc, and fs. Reverts PR 3709 which has been patched in the driver now.
- Remove unused shared mutable global state

## dbt-fusion 2.0.0-beta.15 - June 04, 2025

### Features

- Support `catalog` config for databricks model configs
- Split render & analyze phases into separate progress options

## dbt-fusion 2.0.0-beta.14 - June 03, 2025

### Features

- implement union for seq in minijinja
- New event based progress bar functionality for cli
- Add dict function support on tuples in minijinja

### Fixes

- Fix the databricks function try_to_number() return type
- Allow catalog in sources properties (alias for database)

### Under the Hood

- Bump databricks driver to 0.18.0+dbt0.0.4
- Bump databricks driver to 0.18.0+dbt0.0.5

## dbt-fusion 2.0.0-beta.13 - May 30, 2025

### Fixes

- Improved dbt Fusion show stability for VS Code extension previews by removing schema / type checking
- Removed unnecessary language server compilation failure message "Failed to Resolve" 
- Added error on parsing `flags` and `config` properties in `profiles.yml`, as they no longer do anything and are skipped during Fusion parse
- Improved stability of LSP incremental recompilation  
- Fixed duplicate model name parsing bug ([#63](https://github.com/dbt-labs/dbt-fusion/issues/63))
- Added support for `DBT_PROFILES_DIR` and other env vars in dbt LSP and `profiles.yml`
- Added support for `add_query` adapter method in Databricks
- Added support for Date32/64 and Time32/64 types in dbt Fusion Agate (`stfrtime` method for example). Partially addressed [#79](https://github.com/dbt-labs/dbt-fusion/issues/79)
- Fixed issue with unit test refs / dependencies not being respected
- Fixed issue where `static_analysis` config is not respected in YML
